{"version":3,"names":[],"mappings":"","sources":["path-toolkit.js"],"sourcesContent":["!function(e,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define(r):e.PathToolkit=r()}(this,function(){\"use strict\";var e=function(e){return e}(),r=\"*\",t=\"undefined\",n=\"string\",o=\"parent\",s=\"root\",i=\"placeholder\",a=\"context\",f=\"property\",c=\"collection\",p=\"each\",u=\"singlequote\",l=\"doublequote\",h=\"call\",y=\"evalProperty\",x=function(e,t){var n=(e.indexOf(r),e.split(r,2)),o=!0;if(n[0]){if(n[0]===e)return n[0]===t;o=o&&t.substr(0,n[0].length)===n[0]}return n[1]&&(o=o&&t.substr(-1*n[1].length)===n[1]),o},d=function(e){return typeof e===t||null===e?!1:\"function\"==typeof e||\"object\"==typeof e},w=function(e){var r;return typeof e!==n?e&&!0:(r=e.toUpperCase(),\"TRUE\"===r||\"YES\"===r||\"ON\"===r)},v=function(e,r){var t=new RegExp(e,\"g\");return e+r.replace(t,\"\\\\\"+e)+e},g=function(g){var C,E,m,P,O,A,b,S,j,k,R,q,D=this,F={},T={},U=function(){C=Object.keys(T.prefixes),E=Object.keys(T.separators),m=Object.keys(T.containers),P=m.map(function(e){return T.containers[e].closer}),O=\"\",Object.keys(T.separators).forEach(function(e){T.separators[e].exec===f&&(O=e)}),A=\"\",Object.keys(T.containers).forEach(function(e){T.containers[e].exec===u&&(A=e)}),b=\"[\\\\\\\\\"+[r].concat(C).concat(E).concat(m).join(\"\\\\\").replace(\"\\\\\"+O,\"\")+\"]\",S=new RegExp(b),j=\"[\\\\\\\\\\\\\"+[r].concat(C).concat(E).concat(m).concat(P).join(\"\\\\\")+\"]\",k=new RegExp(j,\"g\"),R=new RegExp(\"\\\\\"+j.replace(/^\\[/,\"[^\")),q=new RegExp(\"\\\\\"+r)},$=function(){T=T||{},T.useCache=!0,T.simple=!1,T.force=!1,T.prefixes={\"^\":{exec:o},\"~\":{exec:s},\"%\":{exec:i},\"@\":{exec:a}},T.separators={\".\":{exec:f},\",\":{exec:c},\"<\":{exec:p}},T.containers={\"[\":{closer:\"]\",exec:f},\"'\":{closer:\"'\",exec:u},'\"':{closer:'\"',exec:l},\"(\":{closer:\")\",exec:h},\"{\":{closer:\"}\",exec:y}}},N=function(t){var o=\"\",s=!0,i=[],a=[],y={},x=0,d=\"\",w=!1,v=!1,g=\"\",C=0,E=\"\",m=\"\",P=\"\",A=[],b=0,j=0;if(T.useCache&&F[t]!==e)return F[t];if(o=t.replace(R,\"$&\".substr(1)),x=o.length,typeof t===n&&!S.test(t))return i=o.split(O),T.useCache&&(F[t]={t:i,simple:s}),{t:i,simple:s};for(C=0;x>C;C++){if(j||\"\\\\\"!==o[C]||(j=C+1,C++),o[C]===r&&(w=!0),b>0)if(!j&&o[C]===E&&E!==m.closer&&b++,!j&&o[C]===m.closer&&b--,b>0)g+=o[C];else{if(x>C+1&&T.separators[o[C+1]]&&T.separators[o[C+1]].exec===c){if(a=N(g),a===e)return;a.exec=m.exec,a.doEach=v,A.push(a)}else if(A[0]){if(a=N(g),a===e)return;a.exec=m.exec,a.doEach=v,A.push(a),i.push(A),A=[],s&=!1}else if(m.exec===f){if(a=N(g),a===e)return;v?(i=i.concat({w:a.t,mods:{},doEach:!0}),s&=!1,v=!1):(i=i.concat(a.t),s&=a.simple)}else if(m.exec===u||m.exec===l)i.push(g),s&=!0;else{if(a=\"\"===g?{t:[],simple:!0}:N(g),a===e)return;a.exec=m.exec,a.doEach=v,i.push(a),s&=!1}g=\"\"}else if(!j&&o[C]in T.prefixes&&T.prefixes[o[C]].exec)y.has=!0,y[T.prefixes[o[C]].exec]?y[T.prefixes[o[C]].exec]++:y[T.prefixes[o[C]].exec]=1;else if(!j&&T.separators.hasOwnProperty(o[C])&&T.separators[o[C]].exec){if(P=T.separators[o[C]],!d&&(y.has||w))return;d&&(y.has||w||v)&&(d={w:d,mods:y,doEach:v},y={},s&=!1),P.exec===f||P.exec===p?(A[0]!==e?(d&&A.push(d),v?i.push({t:A,doEach:!0}):i.push(A),A=[],s&=!1):(d&&i.push(d),s&=!0),v=P.exec===p):P.exec===c&&d&&A.push(d),d=\"\",w=!1}else!j&&T.containers.hasOwnProperty(o[C])&&T.containers[o[C]].exec?(m=T.containers[o[C]],d&&(y.has||w||v)&&(\"string\"==typeof d?d={w:d,mods:y,doEach:v}:(d.mods=y,d.doEach=v),y={}),A[0]!==e?d&&A.push(d):(d&&i.push(d),s&=!0),E=o[C],d&&T.containers[E].exec!==h&&(v=!1),d=\"\",w=!1,b++):x>C&&(d+=o[C]);x>C&&C===j&&(j=0)}return j||(\"string\"==typeof d&&d&&(y.has||w||v)?(d={w:d,mods:y,doEach:v},y={},s&=!1):d&&d.mods&&(d.mods=y),A[0]!==e?(d&&A.push(d),i.push(A),s&=!1):(d&&i.push(d),s&=!0),0!==b)?void 0:(T.useCache&&(F[t]={t:i,simple:s}),{t:i,simple:s})},V=function(r,t,o,s,i){var a,f,c,p=o!==e,u=[],l=0,d=0,w=1,v=0,g=r,C=\"\",E=\"\",m=0,P=r,O=!1,A=0,b=\"\";if(typeof t===n)if(T.useCache&&F[t])u=F[t].t;else{if(u=N(t),u===e)return;u=u.t}else u=t.t?t.t:[t];if(l=u.length,0!==l){for(d=l-1,i?w=i.length:i=[r];g!==e&&l>m;){if(C=u[m],O=p&&m===d,typeof C===n){if(p)if(O){if(P[C]=o,P[C]!==o)return}else T.force&&(Array.isArray(g)?P[C]!==e:!P.hasOwnProperty(C))&&(P[C]={});f=P[C]}else if(C===e)f=void 0;else if(Array.isArray(C))for(f=[],v=0;\"undefined\"!=typeof C[v];){if(a=O?V(P,C[v],o,s,i.slice()):V(P,C[v],void 0,s,i.slice()),a===e)return;O?C[v].t&&C[v].exec===y?P[a]=o:f.push(a):C[v].t&&C[v].exec===y?f.push(P[a]):f.push(a),v++}else if(C.w){if(E=C.w+\"\",C.mods.parent&&(P=i[w-1-C.mods.parent],P===e))return;if(C.mods.root&&(P=i[0],i=[P],w=1),C.mods.placeholder){if(A=E-1,s[A]===e)return;E=s[A].toString()}if(C.doEach){if(!Array.isArray(P))return;for(f=[],v=0;\"undefined\"!=typeof P[v];){if(C.mods.context){if(A=E-1,s[A]===e)return;f.push(s[A])}else if(P[v][E]!==e)O&&(P[v][E]=o),f.push(P[v][E]);else if(\"function\"==typeof P[v])f.push(E);else{if(!q.test(E))return;f.push([]);for(b in P[v])P[v].hasOwnProperty(b)&&x(E,b)&&(O&&(P[v][b]=o),f[v].push(P[v][b]))}v++}}else if(C.mods.context){if(A=E-1,s[A]===e)return;f=s[A]}else if(P[E]!==e)O&&(P[E]=o),f=P[E];else if(\"function\"==typeof P)f=E;else{if(!q.test(E))return;f=[];for(b in P)P.hasOwnProperty(b)&&x(E,b)&&(O&&(P[b]=o),f.push(P[b]))}}else if(C.exec===y)if(C.doEach){if(!Array.isArray(P))return;for(f=[],v=0;\"undefined\"!=typeof P[v];)O&&(P[v][V(P[v],C,e,s,i.slice())]=o),f.push(P[v][V(P[v],C,e,s,i.slice())]),v++}else O&&(P[V(P,C,e,s,i.slice())]=o),f=P[V(P,C,e,s,i.slice())];else if(C.exec===h)if(C.doEach){if(!Array.isArray(i[w-2]))return;for(f=[],v=0;\"undefined\"!=typeof P[v];)C.t&&C.t.length?(c=V(P,C,e,s,i.slice()),c===e?f.push(P[v].apply(i[w-2][v])):Array.isArray(c)?f.push(P[v].apply(i[w-2][v],c)):f.push(P[v].call(i[w-2][v],c))):f.push(P[v].call(i[w-2][v])),v++}else C.t&&C.t.length?(c=V(P,C,e,s,i.slice()),f=c===e?P.apply(i[w-2]):Array.isArray(c)?P.apply(i[w-2],c):P.call(i[w-2],c)):f=P.call(i[w-2]);i.push(f),w++,P=f,g=f,m++}return P}},Y=function(r,t,n){var o=n!==e,s=[],i=0,a=0;for(s=t.split(O),T.useCache&&(F[t]={t:s,simple:!0}),a=s.length;r!==e&&a>i;){if(\"\"===s[i])return;o&&(i===a-1?r[s[i]]=n:T.force&&(Array.isArray(r)?r[s[i]]!==e:!r.hasOwnProperty(s[i]))&&(r[s[i]]={})),r=r[s[i++]]}return r},z=function(r,t,n){for(var o=n!==e,s=0,i=t.length;null!=r&&i>s;){if(\"\"===t[s])return;o&&(s===i-1?r[t[s]]=n:T.force&&(Array.isArray(r)?r[t[s]]!==e:!r.hasOwnProperty(t[s]))&&(r[t[s]]={})),r=r[t[s++]]}return r},B=function(e,r,t,n){var o,s,i,a,f;if(n=n?n:\"\",e===r)return t(n);if(Array.isArray(e)){for(s=e.length,o=0;s>o;o++)if(i=B(e[o],r,t,n+O+o),!i)return;return!0}if(d(e)){for(a=Object.keys(e),s=a.length,s>1&&(a=a.sort()),o=0;s>o;o++)if(e.hasOwnProperty(a[o])&&(f=a[o],k.test(f)&&(f=v(A,f)),i=B(e[a[o]],r,t,n+O+f),!i))return;return!0}return!0};D.getTokens=function(e){var r=N(e);if(typeof r!==t)return r},D.isValid=function(e){return typeof N(e)!==t},D.escape=function(e){return e.replace(k,\"\\\\$&\")},D.get=function(e,r){var t,o=0,s=arguments.length;if(typeof r===n){if(T.useCache&&F[r]&&F[r].simple)return z(e,F[r].t);if(!S.test(r))return Y(e,r)}else if(Object.hasOwnProperty.call(r,\"t\")&&Array.isArray(r.t)&&r.simple)return z(e,r.t);if(t=[],s>2)for(o=2;s>o;o++)t[o-2]=arguments[o];return V(e,r,void 0,t)},D.set=function(r,t,o){var s,i,a=0,f=arguments.length,c=!1;if(typeof t===n?T.useCache&&F[t]&&F[t].simple?(i=z(r,F[t].t,o),c|=!0):S.test(t)||(i=Y(r,t,o),c|=!0):Object.hasOwnProperty.call(t,\"t\")&&Array.isArray(t.t)&&t.simple&&(i=z(r,t.t,o),c|=!0),!c){if(f>3)for(s=[],a=3;f>a;a++)s[a-3]=arguments[a];i=V(r,t,o,s)}return Array.isArray(i)?-1===i.indexOf(void 0):i!==e},D.find=function(e,r,t){var n=[],o=function(e){return n.push(e.substr(1)),t&&\"one\"!==t?!0:(n=n[0],!1)};return B(e,r,o),n[0]?n:void 0};var G=function(e,r,t,n){var o=\"\";Object.keys(e).forEach(function(t){e[t].exec===r&&(o=t)}),delete e[o],e[t]={exec:r},n&&(e[t].closer=n)},H=function(e){var r={};typeof e===n&&1===e.length||(e=\".\"),r[e]={exec:f},T.prefixes={},T.containers={},T.separators=r};D.setOptions=function(e){if(e.prefixes&&(T.prefixes=e.prefixes,F={}),e.separators&&(T.separators=e.separators,F={}),e.containers&&(T.containers=e.containers,F={}),typeof e.cache!==t&&(T.useCache=!!e.cache),typeof e.simple!==t){var r=T.useCache,n=T.force;T.simple=w(e.simple),T.simple?H():($(),T.useCache=r,T.force=n),F={}}typeof e.force!==t&&(T.force=w(e.force)),U()},D.setCache=function(e){T.useCache=w(e)},D.setCacheOn=function(){T.useCache=!0},D.setCacheOff=function(){T.useCache=!1},D.setForce=function(e){T.force=w(e)},D.setForceOn=function(){T.force=!0},D.setForceOff=function(){T.force=!1},D.setSimple=function(e,r){var t=T.useCache,n=T.force;T.simple=w(e),T.simple?(H(r),U()):($(),U(),T.useCache=t,T.force=n),F={}},D.setSimpleOn=function(e){T.simple=!0,H(e),U(),F={}},D.setSimpleOff=function(){var e=T.useCache,r=T.force;T.simple=!1,$(),U(),T.useCache=e,T.force=r,F={}},D.setSeparatorProperty=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setSeparatorProperty - invalid value\");if(e===r||T.separators[e]&&T.separators[e].exec!==f||T.prefixes[e]||T.containers[e])throw new Error(\"setSeparatorProperty - value already in use\");G(T.separators,f,e),U(),F={}},D.setSeparatorCollection=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setSeparatorCollection - invalid value\");if(e===r||T.separators[e]&&T.separators[e].exec!==c||T.prefixes[e]||T.containers[e])throw new Error(\"setSeparatorCollection - value already in use\");G(T.separators,c,e),U(),F={}},D.setPrefixParent=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixParent - invalid value\");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==o||T.separators[e]||T.containers[e])throw new Error(\"setPrefixParent - value already in use\");G(T.prefixes,o,e),U(),F={}},D.setPrefixRoot=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixRoot - invalid value\");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==s||T.separators[e]||T.containers[e])throw new Error(\"setPrefixRoot - value already in use\");G(T.prefixes,s,e),U(),F={}},D.setPrefixPlaceholder=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixPlaceholder - invalid value\");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==i||T.separators[e]||T.containers[e])throw new Error(\"setPrefixPlaceholder - value already in use\");G(T.prefixes,i,e),U(),F={}},D.setPrefixContext=function(e){if(typeof e!==n||1!==e.length)throw new Error(\"setPrefixContext - invalid value\");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==a||T.separators[e]||T.containers[e])throw new Error(\"setPrefixContext - value already in use\");G(T.prefixes,a,e),U(),F={}},D.setContainerProperty=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error(\"setContainerProperty - invalid value\");if(e===r||T.containers[e]&&T.containers[e].exec!==f||T.separators[e]||T.prefixes[e])throw new Error(\"setContainerProperty - value already in use\");G(T.containers,f,e,t),U(),F={}},D.setContainerSinglequote=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error(\"setContainerSinglequote - invalid value\");if(e===r||T.containers[e]&&T.containers[e].exec!==u||T.separators[e]||T.prefixes[e])throw new Error(\"setContainerSinglequote - value already in use\");G(T.containers,u,e,t),U(),F={}},D.setContainerDoublequote=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error(\"setContainerDoublequote - invalid value\");if(e===r||T.containers[e]&&T.containers[e].exec!==l||T.separators[e]||T.prefixes[e])throw new Error(\"setContainerDoublequote - value already in use\");G(T.containers,l,e,t),U(),F={}},D.setContainerCall=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error(\"setContainerCall - invalid value\");if(e===r||T.containers[e]&&T.containers[e].exec!==h||T.separators[e]||T.prefixes[e])throw new Error(\"setContainerCall - value already in use\");G(T.containers,h,e,t),U(),F={}},D.setContainerEvalProperty=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error(\"setContainerProperty - invalid value\");if(e===r||T.containers[e]&&T.containers[e].exec!==y||T.separators[e]||T.prefixes[e])throw new Error(\"setContainerEvalProperty - value already in use\");G(T.containers,y,e,t),U(),F={}},D.resetOptions=function(){$(),U(),F={}},$(),U(),g&&D.setOptions(g)};return g});"],"file":"path-toolkit-min.js","sourceRoot":"/source/"}