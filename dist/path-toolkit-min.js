!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.PathToolkit=t()}(this,function(){"use strict";var e=function(e){return e}(),t="*",r="undefined",n="string",o="parent",s="root",i="placeholder",a="context",f="property",c="collection",p="each",u="singlequote",l="doublequote",h="call",x="evalProperty",y=function(e,r){var n=(e.indexOf(t),e.split(t,2)),o=!0;if(n[0]){if(n[0]===e)return n[0]===r;o=o&&r.substr(0,n[0].length)===n[0]}return n[1]&&(o=o&&r.substr(-1*n[1].length)===n[1]),o},d=function(e){return typeof e===r||null===e?!1:"function"==typeof e||"object"==typeof e},g=function(e){var t;return typeof e!==n?e&&!0:(t=e.toUpperCase(),"TRUE"===t||"YES"===t||"ON"===t)},v=function(e,t){var r=new RegExp(e,"g");return e+t.replace(r,"\\"+e)+e},w=function(w){var E,m,C,P,A,O,b,S,j,R,k,q,D,F,T=this,U={},$={},N=function(){E=Object.keys($.prefixes),m=Object.keys($.separators),C=Object.keys($.containers),P=C.map(function(e){return $.containers[e].closer}),A="",Object.keys($.separators).forEach(function(e){$.separators[e].exec===f&&(A=e)}),O="",b="",Object.keys($.containers).forEach(function(e){$.containers[e].exec===u&&(O=e),$.containers[e].exec===l&&(b=e)}),S="[\\\\"+[t].concat(E).concat(m).concat(C).join("\\").replace("\\"+A,"")+"]",j=new RegExp(S),R="[\\\\\\"+[t].concat(E).concat(m).concat(C).concat(P).join("\\")+"]",k=new RegExp(R,"g"),q=new RegExp("\\"+R.replace(/^\[/,"[^")),D=O||b?new RegExp("\\["+O+b+"]","g"):"",F=new RegExp("\\"+t)},V=function(){$=$||{},$.useCache=!0,$.simple=!1,$.force=!1,$.prefixes={"^":{exec:o},"~":{exec:s},"%":{exec:i},"@":{exec:a}},$.separators={".":{exec:f},",":{exec:c},"<":{exec:p}},$.containers={"[":{closer:"]",exec:f},"'":{closer:"'",exec:u},'"':{closer:'"',exec:l},"(":{closer:")",exec:h},"{":{closer:"}",exec:x}}},Y=function(e){var t=e.replace(D,""),r=t.length;return 2>r?!1:t[0]===t[r-1]&&(t[0]===O||t[0]===b)},z=function(e){return Y(e)?e.slice(1,-1):e},B=function(r){var o="",s=!0,i=[],a=[],x={},y=0,d="",g=!1,v=!1,w="",E=0,m="",C="",P="",O=[],b=0,S=0;if($.useCache&&U[r]!==e)return U[r];if(o=r.replace(q,"$&".substr(1)),y=o.length,typeof r===n&&!j.test(r))return i=o.split(A),$.useCache&&(U[r]={t:i,simple:s}),{t:i,simple:s};for(E=0;y>E;E++){if(S||"\\"!==o[E]||(S=E+1,E++),o[E]===t&&(g=!0),b>0)if(!S&&o[E]===m&&m!==C.closer&&b++,!S&&o[E]===C.closer&&b--,b>0)w+=o[E];else{if(y>E+1&&$.separators[o[E+1]]&&$.separators[o[E+1]].exec===c){if(w.length&&C.exec===f)a=z(w);else if(C.exec===u||C.exec===l)a=w;else{if(a=B(w),a===e)return;a.exec=C.exec,a.doEach=v}O.push(a)}else if(O[0]){if(w.length&&C.exec===f)a=z(w);else if(C.exec===u||C.exec===l)a=w;else{if(a=B(w),a===e)return;a.exec=C.exec,a.doEach=v}O.push(a),i.push({tt:O,doEach:v}),O=[],s&=!1}else if(C.exec===f)a={t:[z(w)]},v?(i.push({w:a.t[0],mods:{},doEach:!0}),s&=!1,v=!1):(i.push(a.t[0]),s&=!0);else if(C.exec===u||C.exec===l)i.push(w),s&=!0;else{if(a=""===w?{t:[],simple:!0}:B(w),a===e)return;a.exec=C.exec,a.doEach=v,i.push(a),s&=!1}w=""}else if(!S&&o[E]in $.prefixes&&$.prefixes[o[E]].exec)x.has=!0,x[$.prefixes[o[E]].exec]?x[$.prefixes[o[E]].exec]++:x[$.prefixes[o[E]].exec]=1;else if(!S&&$.separators[o[E]]&&$.separators[o[E]].exec){if(P=$.separators[o[E]],!d&&(x.has||g))return;d&&(x.has||g||v)&&(d={w:d,mods:x,doEach:v},x={},s&=!1),P.exec===f||P.exec===p?(O[0]!==e?(d&&O.push(d),i.push({tt:O,doEach:v}),O=[],s&=!1):(d&&i.push(d),s&=!0),v=P.exec===p):P.exec===c&&d&&O.push(d),d="",g=!1}else!S&&$.containers[o[E]]&&$.containers[o[E]].exec?(C=$.containers[o[E]],d&&(x.has||g||v)&&("string"==typeof d?d={w:d,mods:x,doEach:v}:(d.mods=x,d.doEach=v),x={}),O[0]!==e?d&&O.push(d):(d&&i.push(d),s&=!0),m=o[E],d&&$.containers[m].exec!==h&&(v=!1),d="",g=!1,b++):y>E&&(d+=o[E]);y>E&&E===S&&(S=0)}return S||("string"==typeof d&&d&&(x.has||g||v)?(d={w:d,mods:x,doEach:v},x={},s&=!1):d&&d.mods&&(d.mods=x),O[0]!==e?(d&&O.push(d),i.push({tt:O,doEach:v}),s&=!1):(d&&i.push(d),s&=!0),0!==b)?void 0:($.useCache&&(U[r]={t:i,simple:s}),{t:i,simple:s})},G=function(t,r,o,s,i){var a,f,c,p=o!==e,u=[],l=0,d=0,g=1,v=0,w=0,E=t,m="",C=0,P=0,A="",O=0,b=t,S=!1,j=0,R="";if(typeof r===n)if($.useCache&&U[r])u=U[r].t;else{if(u=B(r),u===e)return;u=u.t}else u=r.t?r.t:[r];if(l=u.length,0!==l){for(d=l-1,i?g=i.length:i=[t];E!==e&&l>O;){if(m=u[O],S=p&&O===d,typeof m===n){if(p)if(S){if(b[m]=o,b[m]!==o)return}else $.force&&"undefined"==typeof b[m]&&(b[m]={});f=b[m]}else if(m===e)f=void 0;else if(m.tt)if(f=[],m.doEach){if(!Array.isArray(b))return;for(w=0,P=b.length;P>w;){for(v=0,f.push([]),C=m.tt.length;C>v;){if(m.tt[v].doEach=!1,a=S?G(b[w],m.tt[v],o,s,i):"string"==typeof m.tt[v]?b[w][m.tt[v]]:G(b[w],m.tt[v],void 0,s,i),a===e)return;S?m.tt[v].t&&m.tt[v].exec===x?b[w][a]=o:f[w].push(a):m.tt[v].t&&m.tt[v].exec===x?f[w].push(b[w][a]):f[w].push(a),v++}w++}}else for(v=0,C=m.tt.length;C>v;){if(a=S?G(b,m.tt[v],o,s,i):"string"==typeof m.tt[v]?b[m.tt[v]]:G(b,m.tt[v],void 0,s,i),a===e)return;S?m.tt[v].t&&m.tt[v].exec===x?b[a]=o:f.push(a):m.tt[v].t&&m.tt[v].exec===x?f.push(b[a]):f.push(a),v++}else if(m.w){if(A=m.w,m.mods.has){if(m.mods.parent&&(b=i[g-1-m.mods.parent],b===e))return;if(m.mods.root&&(b=i[0],i=[b],g=1),m.mods.placeholder){if(j=A-1,s[j]===e)return;A=s[j].toString()}}if(m.doEach){if(!Array.isArray(b))return;for(f=[],v=0,P=b.length;P>v;){if(m.mods.context){if(j=A-1,s[j]===e)return;f.push(s[j])}else if(b[v][A]!==e)S&&(b[v][A]=o),f.push(b[v][A]);else if("function"==typeof b[v])f.push(A);else{if(!F.test(A))return;f.push([]);for(R in b[v])y(A,R)&&(S&&(b[v][R]=o),f[v].push(b[v][R]))}v++}}else if(m.mods.context){if(j=A-1,s[j]===e)return;f=s[j]}else if(b[A]!==e)S&&(b[A]=o),f=b[A];else if("function"==typeof b)f=A;else{if(!F.test(A))return;f=[];for(R in b)y(A,R)&&(S&&(b[R]=o),f.push(b[R]))}}else if(m.exec===x)if(m.doEach){if(!Array.isArray(b))return;for(f=[],v=0,P=b.length;P>v;)m.simple?(S&&(b[v][T.get(b[v],{t:m.t,simple:!0})]=o),f.push(b[v][T.get(b[v],{t:m.t,simple:!0})])):(S&&(b[v][G(b[v],m,e,s,i)]=o),f.push(b[v][G(b[v],m,e,s,i)])),v++}else m.simple?(S&&(b[T.get(b,{t:m.t,simple:!0})]=o),f=b[T.get(b,{t:m.t,simple:!0})]):(S&&(b[G(b,m,e,s,i)]=o),f=b[G(b,m,e,s,i)]);else if(m.exec===h)if(m.doEach){if(!Array.isArray(i[g-2]))return;for(f=[],v=0,P=b.length;P>v;)m.t&&m.t.length?(c=G(b,m,e,s,i),c===e?f.push(b[v].apply(i[g-2][v])):Array.isArray(c)?f.push(b[v].apply(i[g-2][v],c)):f.push(b[v].call(i[g-2][v],c))):f.push(b[v].call(i[g-2][v])),v++}else m.t&&m.t.length?(c=m.simple?T.get(b,m):G(b,m,e,s,i),f=c===e?b.apply(i[g-2]):Array.isArray(c)?b.apply(i[g-2],c):b.call(i[g-2],c)):f=b.call(i[g-2]);i[g++]=f,b=f,E=f,O++}return b}},H=function(t,r,n){var o=n!==e,s=[],i=0,a=0;for(s=r.split(A),$.useCache&&(U[r]={t:s,simple:!0}),a=s.length;t!==e&&a>i;){if(""===s[i])return;o&&(i===a-1?t[s[i]]=n:$.force&&"undefined"==typeof t[s[i]]&&(t[s[i]]={})),t=t[s[i++]]}return t},I=function(t,r,n){for(var o=n!==e,s=0,i=r.length;null!=t&&i>s;){if(""===r[s])return;o&&(s===i-1?t[r[s]]=n:$.force&&"undefined"==typeof t[r[s]]&&(t[r[s]]={})),t=t[r[s++]]}return t},J=function(e,t,r,n){var o,s,i,a,f;if(n=n?n:"",e===t)return r(n);if(Array.isArray(e)){for(s=e.length,o=0;s>o;o++)if(i=J(e[o],t,r,n+A+o),!i)return;return!0}if(d(e)){for(a=Object.keys(e),s=a.length,s>1&&(a=a.sort()),o=0;s>o;o++)if(e.hasOwnProperty(a[o])&&(f=a[o],k.test(f)&&(f=v(O,f)),i=J(e[a[o]],t,r,n+A+f),!i))return;return!0}return!0};T.getTokens=function(e){var t=B(e);if(typeof t!==r)return t},T.isValid=function(e){return typeof B(e)!==r},T.escape=function(e){return e.replace(k,"\\$&")},T.get=function(e,t){var r,o=0,s=arguments.length;if(typeof t===n){if($.useCache&&U[t]&&U[t].simple)return I(e,U[t].t);if(!j.test(t))return H(e,t)}else if(Array.isArray(t.t)&&t.simple)return I(e,t.t);if(r=[],s>2)for(o=2;s>o;o++)r[o-2]=arguments[o];return G(e,t,void 0,r)},T.set=function(t,r,o){var s,i,a=0,f=arguments.length,c=!1;if(typeof r===n?$.useCache&&U[r]&&U[r].simple?(i=I(t,U[r].t,o),c|=!0):j.test(r)||(i=H(t,r,o),c|=!0):Array.isArray(r.t)&&r.simple&&(i=I(t,r.t,o),c|=!0),!c){if(f>3)for(s=[],a=3;f>a;a++)s[a-3]=arguments[a];i=G(t,r,o,s)}return Array.isArray(i)?-1===i.indexOf(void 0):i!==e},T.find=function(e,t,r){var n=[],o=function(e){return n.push(e.substr(1)),r&&"one"!==r?!0:(n=n[0],!1)};return J(e,t,o),n[0]?n:void 0};var K=function(e,t,r,n){var o="";Object.keys(e).forEach(function(r){e[r].exec===t&&(o=r)}),delete e[o],e[r]={exec:t},n&&(e[r].closer=n)},L=function(e){var t={};typeof e===n&&1===e.length||(e="."),t[e]={exec:f},$.prefixes={},$.containers={},$.separators=t};T.setOptions=function(e){if(e.prefixes&&($.prefixes=e.prefixes,U={}),e.separators&&($.separators=e.separators,U={}),e.containers&&($.containers=e.containers,U={}),typeof e.cache!==r&&($.useCache=!!e.cache),typeof e.simple!==r){var t=$.useCache,n=$.force;$.simple=g(e.simple),$.simple?L():(V(),$.useCache=t,$.force=n),U={}}typeof e.force!==r&&($.force=g(e.force)),N()},T.setCache=function(e){$.useCache=g(e)},T.setCacheOn=function(){$.useCache=!0},T.setCacheOff=function(){$.useCache=!1},T.setForce=function(e){$.force=g(e)},T.setForceOn=function(){$.force=!0},T.setForceOff=function(){$.force=!1},T.setSimple=function(e,t){var r=$.useCache,n=$.force;$.simple=g(e),$.simple?(L(t),N()):(V(),N(),$.useCache=r,$.force=n),U={}},T.setSimpleOn=function(e){$.simple=!0,L(e),N(),U={}},T.setSimpleOff=function(){var e=$.useCache,t=$.force;$.simple=!1,V(),N(),$.useCache=e,$.force=t,U={}},T.setSeparatorProperty=function(e){if(typeof e!==n||1!==e.length)throw new Error("setSeparatorProperty - invalid value");if(e===t||$.separators[e]&&$.separators[e].exec!==f||$.prefixes[e]||$.containers[e])throw new Error("setSeparatorProperty - value already in use");K($.separators,f,e),N(),U={}},T.setSeparatorCollection=function(e){if(typeof e!==n||1!==e.length)throw new Error("setSeparatorCollection - invalid value");if(e===t||$.separators[e]&&$.separators[e].exec!==c||$.prefixes[e]||$.containers[e])throw new Error("setSeparatorCollection - value already in use");K($.separators,c,e),N(),U={}},T.setPrefixParent=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixParent - invalid value");if(e===t||$.prefixes[e]&&$.prefixes[e].exec!==o||$.separators[e]||$.containers[e])throw new Error("setPrefixParent - value already in use");K($.prefixes,o,e),N(),U={}},T.setPrefixRoot=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixRoot - invalid value");if(e===t||$.prefixes[e]&&$.prefixes[e].exec!==s||$.separators[e]||$.containers[e])throw new Error("setPrefixRoot - value already in use");K($.prefixes,s,e),N(),U={}},T.setPrefixPlaceholder=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixPlaceholder - invalid value");if(e===t||$.prefixes[e]&&$.prefixes[e].exec!==i||$.separators[e]||$.containers[e])throw new Error("setPrefixPlaceholder - value already in use");K($.prefixes,i,e),N(),U={}},T.setPrefixContext=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixContext - invalid value");if(e===t||$.prefixes[e]&&$.prefixes[e].exec!==a||$.separators[e]||$.containers[e])throw new Error("setPrefixContext - value already in use");K($.prefixes,a,e),N(),U={}},T.setContainerProperty=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error("setContainerProperty - invalid value");if(e===t||$.containers[e]&&$.containers[e].exec!==f||$.separators[e]||$.prefixes[e])throw new Error("setContainerProperty - value already in use");K($.containers,f,e,r),N(),U={}},T.setContainerSinglequote=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error("setContainerSinglequote - invalid value");if(e===t||$.containers[e]&&$.containers[e].exec!==u||$.separators[e]||$.prefixes[e])throw new Error("setContainerSinglequote - value already in use");K($.containers,u,e,r),N(),U={}},T.setContainerDoublequote=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error("setContainerDoublequote - invalid value");if(e===t||$.containers[e]&&$.containers[e].exec!==l||$.separators[e]||$.prefixes[e])throw new Error("setContainerDoublequote - value already in use");K($.containers,l,e,r),N(),U={}},T.setContainerCall=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error("setContainerCall - invalid value");if(e===t||$.containers[e]&&$.containers[e].exec!==h||$.separators[e]||$.prefixes[e])throw new Error("setContainerCall - value already in use");K($.containers,h,e,r),N(),U={}},T.setContainerEvalProperty=function(e,r){if(typeof e!==n||1!==e.length||typeof r!==n||1!==r.length)throw new Error("setContainerProperty - invalid value");if(e===t||$.containers[e]&&$.containers[e].exec!==x||$.separators[e]||$.prefixes[e])throw new Error("setContainerEvalProperty - value already in use");K($.containers,x,e,r),N(),U={}},T.resetOptions=function(){V(),N(),U={}},V(),N(),w&&T.setOptions(w)};return w});
//# sourceMappingURL=path-toolkit-min.js.map