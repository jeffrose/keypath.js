!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.PathToolkit=r()}(this,function(){"use strict";var e=function(e){return e}(),r="*",t="undefined",n="string",o="parent",s="root",i="placeholder",a="context",f="property",c="collection",p="each",u="singlequote",l="doublequote",h="call",y="evalProperty",x=function(e,t){var n=(e.indexOf(r),e.split(r,2)),o=!0;if(n[0]){if(n[0]===e)return n[0]===t;o=o&&t.substr(0,n[0].length)===n[0]}return n[1]&&(o=o&&t.substr(-1*n[1].length)===n[1]),o},d=function(e){return typeof e===t||null===e?!1:"function"==typeof e||"object"==typeof e},w=function(e){var r;return typeof e!==n?e&&!0:(r=e.toUpperCase(),"TRUE"===r||"YES"===r||"ON"===r)},v=function(e,r){var t=new RegExp(e,"g");return e+r.replace(t,"\\"+e)+e},E=function(E){var g,C,m,P,O,A,b,S,j,k,R,q,D=this,F={},T={},U=function(){g=Object.keys(T.prefixes),C=Object.keys(T.separators),m=Object.keys(T.containers),P=m.map(function(e){return T.containers[e].closer}),O="",Object.keys(T.separators).forEach(function(e){T.separators[e].exec===f&&(O=e)}),A="",Object.keys(T.containers).forEach(function(e){T.containers[e].exec===u&&(A=e)}),b="[\\\\"+[r].concat(g).concat(C).concat(m).join("\\").replace("\\"+O,"")+"]",S=new RegExp(b),j="[\\\\\\"+[r].concat(g).concat(C).concat(m).concat(P).join("\\")+"]",k=new RegExp(j,"g"),R=new RegExp("\\"+j.replace(/^\[/,"[^")),q=new RegExp("\\"+r)},$=function(){T=T||{},T.useCache=!0,T.simple=!1,T.force=!1,T.prefixes={"^":{exec:o},"~":{exec:s},"%":{exec:i},"@":{exec:a}},T.separators={".":{exec:f},",":{exec:c},"<":{exec:p}},T.containers={"[":{closer:"]",exec:f},"'":{closer:"'",exec:u},'"':{closer:'"',exec:l},"(":{closer:")",exec:h},"{":{closer:"}",exec:y}}},N=function(t){var o="",s=!0,i=[],a=[],y={},x=0,d="",w=!1,v=!1,E="",g=0,C="",m="",P="",A=[],b=0,j=0;if(T.useCache&&F[t]!==e)return F[t];if(o=t.replace(R,"$&".substr(1)),x=o.length,typeof t===n&&!S.test(t))return i=o.split(O),T.useCache&&(F[t]={t:i,simple:s}),{t:i,simple:s};for(g=0;x>g;g++){if(j||"\\"!==o[g]||(j=g+1,g++),o[g]===r&&(w=!0),b>0)if(!j&&o[g]===C&&C!==m.closer&&b++,!j&&o[g]===m.closer&&b--,b>0)E+=o[g];else{if(x>g+1&&T.separators[o[g+1]]&&T.separators[o[g+1]].exec===c){if(a=N(E),a===e)return;a.exec=m.exec,a.doEach=v,A.push(a)}else if(A[0]){if(a=N(E),a===e)return;a.exec=m.exec,a.doEach=v,A.push(a),i.push({tt:A,doEach:v}),A=[],s&=!1}else if(m.exec===f){if(a=N(E),a===e)return;v?(i=i.concat({w:a.t,mods:{},doEach:!0}),s&=!1,v=!1):(i=i.concat(a.t),s&=a.simple)}else if(m.exec===u||m.exec===l)i.push(E),s&=!0;else{if(a=""===E?{t:[],simple:!0}:N(E),a===e)return;a.exec=m.exec,a.doEach=v,i.push(a),s&=!1}E=""}else if(!j&&o[g]in T.prefixes&&T.prefixes[o[g]].exec)y.has=!0,y[T.prefixes[o[g]].exec]?y[T.prefixes[o[g]].exec]++:y[T.prefixes[o[g]].exec]=1;else if(!j&&T.separators.hasOwnProperty(o[g])&&T.separators[o[g]].exec){if(P=T.separators[o[g]],!d&&(y.has||w))return;d&&(y.has||w||v)&&(d={w:d,mods:y,doEach:v},y={},s&=!1),P.exec===f||P.exec===p?(A[0]!==e?(d&&A.push(d),i.push({tt:A,doEach:v}),A=[],s&=!1):(d&&i.push(d),s&=!0),v=P.exec===p):P.exec===c&&d&&A.push(d),d="",w=!1}else!j&&T.containers.hasOwnProperty(o[g])&&T.containers[o[g]].exec?(m=T.containers[o[g]],d&&(y.has||w||v)&&("string"==typeof d?d={w:d,mods:y,doEach:v}:(d.mods=y,d.doEach=v),y={}),A[0]!==e?d&&A.push(d):(d&&i.push(d),s&=!0),C=o[g],d&&T.containers[C].exec!==h&&(v=!1),d="",w=!1,b++):x>g&&(d+=o[g]);x>g&&g===j&&(j=0)}return j||("string"==typeof d&&d&&(y.has||w||v)?(d={w:d,mods:y,doEach:v},y={},s&=!1):d&&d.mods&&(d.mods=y),A[0]!==e?(d&&A.push(d),i.push({tt:A,doEach:v}),s&=!1):(d&&i.push(d),s&=!0),0!==b)?void 0:(T.useCache&&(F[t]={t:i,simple:s}),{t:i,simple:s})},V=function(r,t,o,s,i){var a,f,c,p=o!==e,u=[],l=0,d=0,w=1,v=0,E=0,g=r,C="",m="",P=0,O=r,A=!1,b=0,S="";if(typeof t===n)if(T.useCache&&F[t])u=F[t].t;else{if(u=N(t),u===e)return;u=u.t}else u=t.t?t.t:[t];if(l=u.length,0!==l){for(d=l-1,i?w=i.length:i=[r];g!==e&&l>P;){if(C=u[P],A=p&&P===d,typeof C===n){if(p)if(A){if(O[C]=o,O[C]!==o)return}else T.force&&(Array.isArray(g)?O[C]!==e:!O.hasOwnProperty(C))&&(O[C]={});f=O[C]}else if(C===e)f=void 0;else if(C.tt)if(f=[],C.doEach){if(!Array.isArray(O))return;for(E=0;"undefined"!=typeof O[E];){for(v=0,f.push([]);"undefined"!=typeof C.tt[v];){if(C.tt[v].doEach=!1,a=A?V(O[E],C.tt[v],o,s,i.slice()):V(O[E],C.tt[v],void 0,s,i.slice()),a===e)return;A?C.tt[v].t&&C.tt[v].exec===y?O[E][a]=o:f[E].push(a):C.tt[v].t&&C.tt[v].exec===y?f[E].push(O[E][a]):f[E].push(a),v++}E++}}else for(v=0;"undefined"!=typeof C.tt[v];){if(a=A?V(O,C.tt[v],o,s,i.slice()):V(O,C.tt[v],void 0,s,i.slice()),a===e)return;A?C.tt[v].t&&C.tt[v].exec===y?O[a]=o:f.push(a):C.tt[v].t&&C.tt[v].exec===y?f.push(O[a]):f.push(a),v++}else if(C.w){if(m=C.w+"",C.mods.parent&&(O=i[w-1-C.mods.parent],O===e))return;if(C.mods.root&&(O=i[0],i=[O],w=1),C.mods.placeholder){if(b=m-1,s[b]===e)return;m=s[b].toString()}if(C.doEach){if(!Array.isArray(O))return;for(f=[],v=0;"undefined"!=typeof O[v];){if(C.mods.context){if(b=m-1,s[b]===e)return;f.push(s[b])}else if(O[v][m]!==e)A&&(O[v][m]=o),f.push(O[v][m]);else if("function"==typeof O[v])f.push(m);else{if(!q.test(m))return;f.push([]);for(S in O[v])O[v].hasOwnProperty(S)&&x(m,S)&&(A&&(O[v][S]=o),f[v].push(O[v][S]))}v++}}else if(C.mods.context){if(b=m-1,s[b]===e)return;f=s[b]}else if(O[m]!==e)A&&(O[m]=o),f=O[m];else if("function"==typeof O)f=m;else{if(!q.test(m))return;f=[];for(S in O)O.hasOwnProperty(S)&&x(m,S)&&(A&&(O[S]=o),f.push(O[S]))}}else if(C.exec===y)if(C.doEach){if(!Array.isArray(O))return;for(f=[],v=0;"undefined"!=typeof O[v];)A&&(O[v][V(O[v],C,e,s,i.slice())]=o),f.push(O[v][V(O[v],C,e,s,i.slice())]),v++}else A&&(O[V(O,C,e,s,i.slice())]=o),f=O[V(O,C,e,s,i.slice())];else if(C.exec===h)if(C.doEach){if(!Array.isArray(i[w-2]))return;for(f=[],v=0;"undefined"!=typeof O[v];)C.t&&C.t.length?(c=V(O,C,e,s,i.slice()),c===e?f.push(O[v].apply(i[w-2][v])):Array.isArray(c)?f.push(O[v].apply(i[w-2][v],c)):f.push(O[v].call(i[w-2][v],c))):f.push(O[v].call(i[w-2][v])),v++}else C.t&&C.t.length?(c=V(O,C,e,s,i.slice()),f=c===e?O.apply(i[w-2]):Array.isArray(c)?O.apply(i[w-2],c):O.call(i[w-2],c)):f=O.call(i[w-2]);i.push(f),w++,O=f,g=f,P++}return O}},Y=function(r,t,n){var o=n!==e,s=[],i=0,a=0;for(s=t.split(O),T.useCache&&(F[t]={t:s,simple:!0}),a=s.length;r!==e&&a>i;){if(""===s[i])return;o&&(i===a-1?r[s[i]]=n:T.force&&(Array.isArray(r)?r[s[i]]!==e:!r.hasOwnProperty(s[i]))&&(r[s[i]]={})),r=r[s[i++]]}return r},z=function(r,t,n){for(var o=n!==e,s=0,i=t.length;null!=r&&i>s;){if(""===t[s])return;o&&(s===i-1?r[t[s]]=n:T.force&&(Array.isArray(r)?r[t[s]]!==e:!r.hasOwnProperty(t[s]))&&(r[t[s]]={})),r=r[t[s++]]}return r},B=function(e,r,t,n){var o,s,i,a,f;if(n=n?n:"",e===r)return t(n);if(Array.isArray(e)){for(s=e.length,o=0;s>o;o++)if(i=B(e[o],r,t,n+O+o),!i)return;return!0}if(d(e)){for(a=Object.keys(e),s=a.length,s>1&&(a=a.sort()),o=0;s>o;o++)if(e.hasOwnProperty(a[o])&&(f=a[o],k.test(f)&&(f=v(A,f)),i=B(e[a[o]],r,t,n+O+f),!i))return;return!0}return!0};D.getTokens=function(e){var r=N(e);if(typeof r!==t)return r},D.isValid=function(e){return typeof N(e)!==t},D.escape=function(e){return e.replace(k,"\\$&")},D.get=function(e,r){var t,o=0,s=arguments.length;if(typeof r===n){if(T.useCache&&F[r]&&F[r].simple)return z(e,F[r].t);if(!S.test(r))return Y(e,r)}else if(Object.hasOwnProperty.call(r,"t")&&Array.isArray(r.t)&&r.simple)return z(e,r.t);if(t=[],s>2)for(o=2;s>o;o++)t[o-2]=arguments[o];return V(e,r,void 0,t)},D.set=function(r,t,o){var s,i,a=0,f=arguments.length,c=!1;if(typeof t===n?T.useCache&&F[t]&&F[t].simple?(i=z(r,F[t].t,o),c|=!0):S.test(t)||(i=Y(r,t,o),c|=!0):Object.hasOwnProperty.call(t,"t")&&Array.isArray(t.t)&&t.simple&&(i=z(r,t.t,o),c|=!0),!c){if(f>3)for(s=[],a=3;f>a;a++)s[a-3]=arguments[a];i=V(r,t,o,s)}return Array.isArray(i)?-1===i.indexOf(void 0):i!==e},D.find=function(e,r,t){var n=[],o=function(e){return n.push(e.substr(1)),t&&"one"!==t?!0:(n=n[0],!1)};return B(e,r,o),n[0]?n:void 0};var G=function(e,r,t,n){var o="";Object.keys(e).forEach(function(t){e[t].exec===r&&(o=t)}),delete e[o],e[t]={exec:r},n&&(e[t].closer=n)},H=function(e){var r={};typeof e===n&&1===e.length||(e="."),r[e]={exec:f},T.prefixes={},T.containers={},T.separators=r};D.setOptions=function(e){if(e.prefixes&&(T.prefixes=e.prefixes,F={}),e.separators&&(T.separators=e.separators,F={}),e.containers&&(T.containers=e.containers,F={}),typeof e.cache!==t&&(T.useCache=!!e.cache),typeof e.simple!==t){var r=T.useCache,n=T.force;T.simple=w(e.simple),T.simple?H():($(),T.useCache=r,T.force=n),F={}}typeof e.force!==t&&(T.force=w(e.force)),U()},D.setCache=function(e){T.useCache=w(e)},D.setCacheOn=function(){T.useCache=!0},D.setCacheOff=function(){T.useCache=!1},D.setForce=function(e){T.force=w(e)},D.setForceOn=function(){T.force=!0},D.setForceOff=function(){T.force=!1},D.setSimple=function(e,r){var t=T.useCache,n=T.force;T.simple=w(e),T.simple?(H(r),U()):($(),U(),T.useCache=t,T.force=n),F={}},D.setSimpleOn=function(e){T.simple=!0,H(e),U(),F={}},D.setSimpleOff=function(){var e=T.useCache,r=T.force;T.simple=!1,$(),U(),T.useCache=e,T.force=r,F={}},D.setSeparatorProperty=function(e){if(typeof e!==n||1!==e.length)throw new Error("setSeparatorProperty - invalid value");if(e===r||T.separators[e]&&T.separators[e].exec!==f||T.prefixes[e]||T.containers[e])throw new Error("setSeparatorProperty - value already in use");G(T.separators,f,e),U(),F={}},D.setSeparatorCollection=function(e){if(typeof e!==n||1!==e.length)throw new Error("setSeparatorCollection - invalid value");if(e===r||T.separators[e]&&T.separators[e].exec!==c||T.prefixes[e]||T.containers[e])throw new Error("setSeparatorCollection - value already in use");G(T.separators,c,e),U(),F={}},D.setPrefixParent=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixParent - invalid value");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==o||T.separators[e]||T.containers[e])throw new Error("setPrefixParent - value already in use");G(T.prefixes,o,e),U(),F={}},D.setPrefixRoot=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixRoot - invalid value");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==s||T.separators[e]||T.containers[e])throw new Error("setPrefixRoot - value already in use");G(T.prefixes,s,e),U(),F={}},D.setPrefixPlaceholder=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixPlaceholder - invalid value");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==i||T.separators[e]||T.containers[e])throw new Error("setPrefixPlaceholder - value already in use");G(T.prefixes,i,e),U(),F={}},D.setPrefixContext=function(e){if(typeof e!==n||1!==e.length)throw new Error("setPrefixContext - invalid value");if(e===r||T.prefixes[e]&&T.prefixes[e].exec!==a||T.separators[e]||T.containers[e])throw new Error("setPrefixContext - value already in use");G(T.prefixes,a,e),U(),F={}},D.setContainerProperty=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerProperty - invalid value");if(e===r||T.containers[e]&&T.containers[e].exec!==f||T.separators[e]||T.prefixes[e])throw new Error("setContainerProperty - value already in use");G(T.containers,f,e,t),U(),F={}},D.setContainerSinglequote=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerSinglequote - invalid value");if(e===r||T.containers[e]&&T.containers[e].exec!==u||T.separators[e]||T.prefixes[e])throw new Error("setContainerSinglequote - value already in use");G(T.containers,u,e,t),U(),F={}},D.setContainerDoublequote=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerDoublequote - invalid value");if(e===r||T.containers[e]&&T.containers[e].exec!==l||T.separators[e]||T.prefixes[e])throw new Error("setContainerDoublequote - value already in use");G(T.containers,l,e,t),U(),F={}},D.setContainerCall=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerCall - invalid value");if(e===r||T.containers[e]&&T.containers[e].exec!==h||T.separators[e]||T.prefixes[e])throw new Error("setContainerCall - value already in use");G(T.containers,h,e,t),U(),F={}},D.setContainerEvalProperty=function(e,t){if(typeof e!==n||1!==e.length||typeof t!==n||1!==t.length)throw new Error("setContainerProperty - invalid value");if(e===r||T.containers[e]&&T.containers[e].exec!==y||T.separators[e]||T.prefixes[e])throw new Error("setContainerEvalProperty - value already in use");G(T.containers,y,e,t),U(),F={}},D.resetOptions=function(){$(),U(),F={}},$(),U(),E&&D.setOptions(E)};return E});
//# sourceMappingURL=path-toolkit-min.js.map